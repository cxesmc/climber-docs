<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Installation - CLIMBER-X-docs</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../stylesheets/extra.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Installation";
        var mkdocs_page_input_path = "installation.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> CLIMBER-X-docs
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">Home</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Getting started</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../getting-started/">Getting started</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../dependencies/">Dependencies</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="./">Installation</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#climber-x-climate-model">CLIMBER-X climate model</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#climber-x-climate-and-carbon-cycle-model">CLIMBER-X climate and carbon cycle model</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#climber-x-climate-and-ice-sheet-model">CLIMBER-X climate and ice sheet model</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#fully-coupled-climber-x-configuration">Fully coupled CLIMBER-X configuration</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#notes-for-specific-systems">Notes for specific systems</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#running-at-pik-on-hpc2024-foote">Running at PIK on HPC2024 (foote)</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#running-at-awi-on-albedo">Running at AWI on albedo</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#running-at-dkrz-on-levante">Running at DKRZ on levante</a>
    </li>
        </ul>
    </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../runme-notes/">runme notes</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Use cases</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../use-cases/01-pi_spinup/">Pre-industrial spinup</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../use-cases/02-historical/">Historical</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Output description</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../var_lists/">Output files</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Workshops</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../workshops/2025/">Workshop 2025</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">CLIMBER-X-docs</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">Getting started</li>
      <li class="breadcrumb-item active">Installation</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="installing-climber-x">Installing CLIMBER-X</h1>
<p>Here you can find the basic information and steps needed to install <strong>CLIMBER-X</strong>.</p>
<p>There are currently four different flavors of <strong>CLIMBER-X</strong> that can be set up:</p>
<ul>
<li><code>climber-clim</code>: minimal climate model configuration with atmosphere, ocean, sea ice and land (including dynamic vegetation)</li>
<li><code>climber-clim-bgc</code>: coupled climate-carbon cycle model configuration; clim plus with ocean biogeochemistry</li>
<li><code>climber-clim-ice</code>: coupled climate-ice sheet model configuration; clim plus with ice sheets</li>
<li><code>climber-clim-bgc-ice</code>: fully coupled model configuration; clim plus with ocean biogeochemistry and ice sheets</li>
</ul>
<p>The model dependencies vary according to the desired model configuration:</p>
<ul>
<li>Dependencies are: NetCDF, coordinates, Python3.x, runner, CDO</li>
<li>Additional dependencies if using coupled ice sheets are: Yelmo, LIS</li>
</ul>
<p>See: <a href="../dependencies/">Dependencies</a> for more details.</p>
<p>Follow the steps below to (1) obtain the code, (2) configure the Makefile(s) for your system,
(3) compile an executable program.</p>
<h2 id="climber-x-climate-model">CLIMBER-X climate model</h2>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="c1">### Download the CLIMBER-X code ###</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="c1"># Clone repository</span>
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/cxesmc/climber-x.git
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>git<span class="w"> </span>clone<span class="w"> </span>git@github.com:cxesmc/climber-x.git<span class="w"> </span><span class="c1"># via ssh</span>
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>
</span><span id="__span-0-7"><a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="c1"># Enter directory </span>
</span><span id="__span-0-8"><a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="nb">cd</span><span class="w"> </span>climber-x
</span><span id="__span-0-9"><a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a>
</span><span id="__span-0-10"><a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a><span class="c1"># Run configuration script</span>
</span><span id="__span-0-11"><a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a>python<span class="w"> </span>config.py<span class="w"> </span>config/pik_hpc2024_ifx<span class="w">   </span><span class="c1"># Or config file for your system</span>
</span><span id="__span-0-12"><a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a>
</span><span id="__span-0-13"><a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a><span class="c1"># Clone input file directory</span>
</span><span id="__span-0-14"><a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a>git<span class="w"> </span>clone<span class="w"> </span>https://gitlab.pik-potsdam.de/cxesmc/climber-x-input.git<span class="w"> </span>input
</span><span id="__span-0-15"><a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a>git<span class="w"> </span>clone<span class="w"> </span>git@gitlab.pik-potsdam.de:cxesmc/climber-x-input.git<span class="w"> </span>input<span class="w">    </span><span class="c1"># via ssh</span>
</span><span id="__span-0-16"><a id="__codelineno-0-16" name="__codelineno-0-16" href="#__codelineno-0-16"></a>
</span><span id="__span-0-17"><a id="__codelineno-0-17" name="__codelineno-0-17" href="#__codelineno-0-17"></a><span class="c1"># Download and configure coordinates</span>
</span><span id="__span-0-18"><a id="__codelineno-0-18" name="__codelineno-0-18" href="#__codelineno-0-18"></a><span class="nb">cd</span><span class="w"> </span>src/utils/
</span><span id="__span-0-19"><a id="__codelineno-0-19" name="__codelineno-0-19" href="#__codelineno-0-19"></a>git<span class="w"> </span>clone<span class="w"> </span>git@github.com:fesmc/coordinates.git
</span><span id="__span-0-20"><a id="__codelineno-0-20" name="__codelineno-0-20" href="#__codelineno-0-20"></a><span class="nb">cd</span><span class="w"> </span>coordinates
</span><span id="__span-0-21"><a id="__codelineno-0-21" name="__codelineno-0-21" href="#__codelineno-0-21"></a>python3<span class="w"> </span>config.py<span class="w"> </span>config/pik_hpc2024_ifx<span class="w">   </span><span class="c1"># Or config file for your system</span>
</span><span id="__span-0-22"><a id="__codelineno-0-22" name="__codelineno-0-22" href="#__codelineno-0-22"></a><span class="nb">cd</span><span class="w"> </span>../../..<span class="w">   </span><span class="c1"># Return to climber-x parent directory</span>
</span><span id="__span-0-23"><a id="__codelineno-0-23" name="__codelineno-0-23" href="#__codelineno-0-23"></a>
</span><span id="__span-0-24"><a id="__codelineno-0-24" name="__codelineno-0-24" href="#__codelineno-0-24"></a><span class="c1"># Step back out of climber-x parente directory and </span>
</span><span id="__span-0-25"><a id="__codelineno-0-25" name="__codelineno-0-25" href="#__codelineno-0-25"></a><span class="c1"># clone and install external libraries repository</span>
</span><span id="__span-0-26"><a id="__codelineno-0-26" name="__codelineno-0-26" href="#__codelineno-0-26"></a><span class="nb">cd</span><span class="w"> </span>..
</span><span id="__span-0-27"><a id="__codelineno-0-27" name="__codelineno-0-27" href="#__codelineno-0-27"></a>git<span class="w"> </span>clone<span class="w"> </span>git@github.com:fesmc/fesm-utils.git
</span><span id="__span-0-28"><a id="__codelineno-0-28" name="__codelineno-0-28" href="#__codelineno-0-28"></a><span class="nb">cd</span><span class="w"> </span>fesm-utils
</span><span id="__span-0-29"><a id="__codelineno-0-29" name="__codelineno-0-29" href="#__codelineno-0-29"></a>./install_pik.sh<span class="w"> </span>ifx<span class="w">   </span><span class="c1"># Use install_dkrz.sh as needed</span>
</span><span id="__span-0-30"><a id="__codelineno-0-30" name="__codelineno-0-30" href="#__codelineno-0-30"></a><span class="nv">FESMUSRC</span><span class="o">=</span><span class="nv">$PWD</span>
</span><span id="__span-0-31"><a id="__codelineno-0-31" name="__codelineno-0-31" href="#__codelineno-0-31"></a><span class="nb">cd</span><span class="w"> </span>../climber-x/<span class="w">       </span><span class="c1"># Return to climber-x parent directory</span>
</span><span id="__span-0-32"><a id="__codelineno-0-32" name="__codelineno-0-32" href="#__codelineno-0-32"></a>ln<span class="w"> </span>-s<span class="w"> </span><span class="nv">$FESMUSRC</span><span class="w"> </span>./src/utils/
</span><span id="__span-0-33"><a id="__codelineno-0-33" name="__codelineno-0-33" href="#__codelineno-0-33"></a>
</span><span id="__span-0-34"><a id="__codelineno-0-34" name="__codelineno-0-34" href="#__codelineno-0-34"></a><span class="c1"># Install other external utils library</span>
</span><span id="__span-0-35"><a id="__codelineno-0-35" name="__codelineno-0-35" href="#__codelineno-0-35"></a><span class="nb">cd</span><span class="w"> </span>src/utils/fesm-utils/utils
</span><span id="__span-0-36"><a id="__codelineno-0-36" name="__codelineno-0-36" href="#__codelineno-0-36"></a>python<span class="w"> </span>config.py<span class="w"> </span>config/pik_hpc2024_ifx<span class="w">  </span><span class="c1"># replace with config file for your system</span>
</span><span id="__span-0-37"><a id="__codelineno-0-37" name="__codelineno-0-37" href="#__codelineno-0-37"></a>make<span class="w"> </span>clean
</span><span id="__span-0-38"><a id="__codelineno-0-38" name="__codelineno-0-38" href="#__codelineno-0-38"></a>make<span class="w"> </span>fesmutils-static<span class="w"> </span><span class="nv">openmp</span><span class="o">=</span><span class="m">0</span><span class="w">    </span><span class="c1"># serial version</span>
</span><span id="__span-0-39"><a id="__codelineno-0-39" name="__codelineno-0-39" href="#__codelineno-0-39"></a>make<span class="w"> </span>fesmutils-static<span class="w"> </span><span class="nv">openmp</span><span class="o">=</span><span class="m">1</span><span class="w">    </span><span class="c1"># parallel version</span>
</span><span id="__span-0-40"><a id="__codelineno-0-40" name="__codelineno-0-40" href="#__codelineno-0-40"></a><span class="nb">cd</span><span class="w"> </span>../../../..<span class="w"> </span><span class="c1"># Return to climber-x parent directory</span>
</span><span id="__span-0-41"><a id="__codelineno-0-41" name="__codelineno-0-41" href="#__codelineno-0-41"></a>
</span><span id="__span-0-42"><a id="__codelineno-0-42" name="__codelineno-0-42" href="#__codelineno-0-42"></a><span class="c1">### Compile and run ###</span>
</span><span id="__span-0-43"><a id="__codelineno-0-43" name="__codelineno-0-43" href="#__codelineno-0-43"></a>
</span><span id="__span-0-44"><a id="__codelineno-0-44" name="__codelineno-0-44" href="#__codelineno-0-44"></a><span class="c1"># Compile the climate model </span>
</span><span id="__span-0-45"><a id="__codelineno-0-45" name="__codelineno-0-45" href="#__codelineno-0-45"></a>make<span class="w"> </span>cleanall
</span><span id="__span-0-46"><a id="__codelineno-0-46" name="__codelineno-0-46" href="#__codelineno-0-46"></a>make<span class="w"> </span>climber-clim
</span><span id="__span-0-47"><a id="__codelineno-0-47" name="__codelineno-0-47" href="#__codelineno-0-47"></a>
</span><span id="__span-0-48"><a id="__codelineno-0-48" name="__codelineno-0-48" href="#__codelineno-0-48"></a><span class="c1"># Set up your `runme` config file for your system</span>
</span><span id="__span-0-49"><a id="__codelineno-0-49" name="__codelineno-0-49" href="#__codelineno-0-49"></a>cp<span class="w"> </span>.runme/runme_config<span class="w"> </span>.runme_config
</span><span id="__span-0-50"><a id="__codelineno-0-50" name="__codelineno-0-50" href="#__codelineno-0-50"></a><span class="c1"># - Edit hpc and account name to match your settings</span>
</span><span id="__span-0-51"><a id="__codelineno-0-51" name="__codelineno-0-51" href="#__codelineno-0-51"></a>
</span><span id="__span-0-52"><a id="__codelineno-0-52" name="__codelineno-0-52" href="#__codelineno-0-52"></a><span class="c1"># Make sure to install the `runner` package too</span>
</span><span id="__span-0-53"><a id="__codelineno-0-53" name="__codelineno-0-53" href="#__codelineno-0-53"></a>pip<span class="w"> </span>install<span class="w"> </span>https://github.com/fesmc/runner/archive/refs/heads/master.zip<span class="w"> </span>
</span><span id="__span-0-54"><a id="__codelineno-0-54" name="__codelineno-0-54" href="#__codelineno-0-54"></a>
</span><span id="__span-0-55"><a id="__codelineno-0-55" name="__codelineno-0-55" href="#__codelineno-0-55"></a><span class="c1"># Run a pre-industrial equilibrium climate-only test simulation</span>
</span><span id="__span-0-56"><a id="__codelineno-0-56" name="__codelineno-0-56" href="#__codelineno-0-56"></a>./runme<span class="w"> </span>-rs<span class="w"> </span>-q<span class="w"> </span>short<span class="w"> </span>--omp<span class="w"> </span><span class="m">32</span><span class="w"> </span>-o<span class="w"> </span>output/clim
</span></code></pre></div>
<p>The climate only version <code>climber-clim</code> corresponds to the version described by Willeit et al. (2022). This particular model setup does not require non-climate source code or the LIS library for compilation.</p>
<p>That's it. The executable <code>climber.x</code> should now be available in the main directory.</p>
<p>To compile the model with debug flags enabled use:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>make<span class="w"> </span>climber-clim<span class="w"> </span><span class="nv">debug</span><span class="o">=</span><span class="m">1</span>
</span></code></pre></div>
<p>By default, the model is compiled with <code>openmp</code>. To compile the model without openmp use:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>make<span class="w"> </span>climber-clim<span class="w"> </span><span class="nv">openmp</span><span class="o">=</span><span class="m">0</span>
</span></code></pre></div>
<p>This version should typically not be used.</p>
<h2 id="climber-x-climate-and-carbon-cycle-model">CLIMBER-X climate and carbon cycle model</h2>
<p>If you would also like to run CLIMBER-X with an interactive carbon cycle, then the <strong>HAMOCC</strong>
ocean biogeochemistry (<code>bgc</code>) code must also be downloaded:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="c1"># bgc</span>
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="nb">cd</span><span class="w"> </span>src/
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a>git<span class="w"> </span>clone<span class="w"> </span>git@github.com:cxesmc/bgc.git
</span><span id="__span-3-4"><a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a><span class="nb">cd</span><span class="w"> </span>bgc/
</span><span id="__span-3-5"><a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a>git<span class="w"> </span>submodule<span class="w"> </span>update<span class="w"> </span>--init<span class="w"> </span>--recursive<span class="w">     </span><span class="c1"># for submodule M4AGO </span>
</span><span id="__span-3-6"><a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a><span class="nb">cd</span><span class="w"> </span>../..
</span></code></pre></div>
<p>Since the HAMOCC model code is not open source, the <code>bgc</code> repository is private at the moment and
you need to be given permission in order to access it. HAMOCC is covered by the Max Planck Institute for
Meteorology software licence agreement as part of the MPI-ESM (<a href="https://code.mpimet.mpg.de/attachments/download/26986/MPI-ESM_SLA_v3.4.pdf">https://code.mpimet.mpg.de/attachments/download/26986/MPI-ESM_SLA_v3.4.pdf</a>).
A pre-requisite to access the <code>bgc</code> repository is therefore that you agree to the MPI-ESM license
by following the steps outlined here: <a href="https://code.mpimet.mpg.de/projects/mpi-esm-license">https://code.mpimet.mpg.de/projects/mpi-esm-license</a>.
Once you have done so, send an email to <a href="mailto:matteo.willeit@gmail.com?subject=[GitHub]%20bgc%20source%20code">Matteo Willeit</a> and you will be granted permission to access the <code>bgc</code> repository.</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="c1"># Compile the climate and carbon cycle model </span>
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a>make<span class="w"> </span>clean
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a>make<span class="w"> </span>climber-clim-bgc
</span><span id="__span-4-4"><a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a>
</span><span id="__span-4-5"><a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a><span class="c1"># Run a pre-industrial equilibrium simulation with ocean biogeochemistry</span>
</span><span id="__span-4-6"><a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a>./runme<span class="w"> </span>-rs<span class="w"> </span>-q<span class="w"> </span>short<span class="w"> </span>--omp<span class="w"> </span><span class="m">16</span><span class="w"> </span>-o<span class="w"> </span>output/clim-bgc<span class="w"> </span>-p<span class="w"> </span>ctl.flag_bgc<span class="o">=</span>T
</span></code></pre></div>
<h2 id="climber-x-climate-and-ice-sheet-model">CLIMBER-X climate and ice sheet model</h2>
<p>If you would also like to run with an interactive ice sheet, the <strong>Yelmo</strong> ice-sheet code
must be downloaded and configured and the solid Earth model <strong>VILMA</strong> libraries must be
downloaded before compiling:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="c1"># yelmo</span>
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="nb">cd</span><span class="w"> </span>src
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a>git<span class="w"> </span>clone<span class="w"> </span>git@github.com:palma-ice/yelmo.git
</span><span id="__span-5-4"><a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a><span class="nb">cd</span><span class="w"> </span>yelmo
</span><span id="__span-5-5"><a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a>git<span class="w"> </span>checkout<span class="w"> </span>climber-x<span class="w">                     </span><span class="c1"># Get climber-x branch</span>
</span><span id="__span-5-6"><a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a>python3<span class="w"> </span>config.py<span class="w"> </span>config/pik_hpc2024_ifx<span class="w">   </span><span class="c1"># Or config file for your system</span>
</span><span id="__span-5-7"><a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a>ln<span class="w"> </span>-s<span class="w"> </span><span class="nv">$FESMUSRC</span><span class="w"> </span>.<span class="w">              </span><span class="c1"># Link absolute path</span>
</span><span id="__span-5-8"><a id="__codelineno-5-8" name="__codelineno-5-8" href="#__codelineno-5-8"></a><span class="nb">cd</span><span class="w"> </span>../..<span class="w">            </span><span class="c1"># Return to climber-x parent directory</span>
</span><span id="__span-5-9"><a id="__codelineno-5-9" name="__codelineno-5-9" href="#__codelineno-5-9"></a>
</span><span id="__span-5-10"><a id="__codelineno-5-10" name="__codelineno-5-10" href="#__codelineno-5-10"></a><span class="c1"># vilma</span>
</span><span id="__span-5-11"><a id="__codelineno-5-11" name="__codelineno-5-11" href="#__codelineno-5-11"></a><span class="nb">cd</span><span class="w"> </span>src/
</span><span id="__span-5-12"><a id="__codelineno-5-12" name="__codelineno-5-12" href="#__codelineno-5-12"></a>git<span class="w"> </span>clone<span class="w"> </span>git@github.com:cxesmc/vilma.git<span class="w">  </span><span class="c1"># private repository, premission needed</span>
</span><span id="__span-5-13"><a id="__codelineno-5-13" name="__codelineno-5-13" href="#__codelineno-5-13"></a><span class="nb">cd</span><span class="w"> </span>..
</span></code></pre></div>
<p>Since the VILMA model code is not open source, the <code>vilma</code> repository is private at the moment and you need to be given permission in order to access it. Please send an email to <a href="mailto:matteo.willeit@gmail.com,volkerk@gfz-potsdam.de?subject=[GitHub]%20VILMA%20access">Matteo Willeit and Volker Klemann</a> and you will be granted permission to access the <code>vilma</code> repository.</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="c1"># Compile the climate and ice sheet model</span>
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a>make<span class="w"> </span>clean
</span><span id="__span-6-3"><a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a>make<span class="w"> </span>climber-clim-ice
</span><span id="__span-6-4"><a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a>
</span><span id="__span-6-5"><a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a><span class="c1"># Run pre-industrial equilibrium simulation with interactive Greenland ice sheet</span>
</span><span id="__span-6-6"><a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a>./runme<span class="w"> </span>-rs<span class="w"> </span>-q<span class="w"> </span>short<span class="w"> </span>--omp<span class="w"> </span><span class="m">16</span><span class="w"> </span>-o<span class="w"> </span>output/clim-ice<span class="w"> </span>-p<span class="w"> </span>ctl.flag_ice<span class="o">=</span>T<span class="w"> </span>ctl.flag_geo<span class="o">=</span>T<span class="w"> </span>ctl.flag_smb<span class="o">=</span>T<span class="w"> </span>ctl.flag_imo<span class="o">=</span>T<span class="w"> </span>ctl.ice_model_name<span class="o">=</span>yelmo<span class="w"> </span>ctl.ice_domain_name<span class="o">=</span>GRL-16KM
</span></code></pre></div>
<h2 id="fully-coupled-climber-x-configuration">Fully coupled CLIMBER-X configuration</h2>
<p>If you have followed all steps above you will also be ready to run fully coupled simulations:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="c1"># Compile the fully coupled model</span>
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a>make<span class="w"> </span>clean
</span><span id="__span-7-3"><a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a>make<span class="w"> </span>climber-clim-bgc-ice<span class="w">  </span><span class="c1"># or equivalently make climber</span>
</span><span id="__span-7-4"><a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a>
</span><span id="__span-7-5"><a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a><span class="c1"># Run pre-industrial equilibrium simulation with ocean biogeochemistry and interactive Greenland ice sheet</span>
</span><span id="__span-7-6"><a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a>./runme<span class="w"> </span>-s<span class="w"> </span>-q<span class="w"> </span>short<span class="w"> </span>--omp<span class="w"> </span><span class="m">16</span><span class="w"> </span>-o<span class="w"> </span>output/clim-bgc-ice<span class="w"> </span>-p<span class="w"> </span>ctl.flag_bgc<span class="o">=</span>T<span class="w"> </span>ctl.flag_ice<span class="o">=</span>T<span class="w"> </span>ctl.flag_geo<span class="o">=</span>T<span class="w"> </span>ctl.flag_smb<span class="o">=</span>T<span class="w"> </span>ctl.flag_imo<span class="o">=</span>T<span class="w"> </span>ctl.ice_model_name<span class="o">=</span>yelmo<span class="w"> </span>ctl.ice_domain_name<span class="o">=</span>GRL-16KM
</span></code></pre></div>
<h2 id="notes-for-specific-systems">Notes for specific systems</h2>
<h3 id="running-at-pik-on-hpc2024-foote">Running at PIK on HPC2024 (foote)</h3>
<p>The following modules have to be loaded in order to compile and run the model.
For convenience you can also add those commands to your <code>.profile</code> file in your home directory.</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="w">    </span>module<span class="w"> </span>purge
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a><span class="w">    </span>module<span class="w"> </span>use<span class="w"> </span>/p/system/modulefiles/compiler<span class="w"> </span><span class="se">\</span>
</span><span id="__span-8-3"><a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a><span class="w">               </span>/p/system/modulefiles/gpu<span class="w"> </span><span class="se">\</span>
</span><span id="__span-8-4"><a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a><span class="w">               </span>/p/system/modulefiles/libraries<span class="w"> </span><span class="se">\</span>
</span><span id="__span-8-5"><a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a><span class="w">               </span>/p/system/modulefiles/parallel<span class="w"> </span><span class="se">\</span>
</span><span id="__span-8-6"><a id="__codelineno-8-6" name="__codelineno-8-6" href="#__codelineno-8-6"></a><span class="w">               </span>/p/system/modulefiles/tools
</span><span id="__span-8-7"><a id="__codelineno-8-7" name="__codelineno-8-7" href="#__codelineno-8-7"></a>
</span><span id="__span-8-8"><a id="__codelineno-8-8" name="__codelineno-8-8" href="#__codelineno-8-8"></a><span class="w">    </span>module<span class="w"> </span>load<span class="w"> </span>intel/oneAPI/2024.0.0
</span><span id="__span-8-9"><a id="__codelineno-8-9" name="__codelineno-8-9" href="#__codelineno-8-9"></a><span class="w">    </span>module<span class="w"> </span>load<span class="w"> </span>netcdf-c/4.9.2
</span><span id="__span-8-10"><a id="__codelineno-8-10" name="__codelineno-8-10" href="#__codelineno-8-10"></a><span class="w">    </span>module<span class="w"> </span>load<span class="w"> </span>netcdf-fortran-intel/4.6.1
</span><span id="__span-8-11"><a id="__codelineno-8-11" name="__codelineno-8-11" href="#__codelineno-8-11"></a><span class="w">    </span>module<span class="w"> </span>load<span class="w"> </span>udunits/2.2.28
</span><span id="__span-8-12"><a id="__codelineno-8-12" name="__codelineno-8-12" href="#__codelineno-8-12"></a><span class="w">    </span>module<span class="w"> </span>load<span class="w"> </span>ncview/2.1.10
</span><span id="__span-8-13"><a id="__codelineno-8-13" name="__codelineno-8-13" href="#__codelineno-8-13"></a><span class="w">    </span>module<span class="w"> </span>load<span class="w"> </span>cdo/2.4.2
</span></code></pre></div>
<p>When installing <code>fesm-utils</code> (see <a href="../dependencies/">Dependencies</a>) use the <code>pik</code> script:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a>./install_pik.sh<span class="w"> </span>ifx
</span></code></pre></div>
<h3 id="running-at-awi-on-albedo">Running at AWI on albedo</h3>
<p>Load the following modules in your <code>.bashrc</code> file in your home directory.</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="w">    </span>module<span class="w"> </span>load<span class="w"> </span>intel-oneapi-compilers/2024.0.0
</span><span id="__span-10-2"><a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a><span class="w">    </span>module<span class="w"> </span>load<span class="w"> </span>netcdf-c/4.8.1-openmpi4.1.3-oneapi2022.1.0
</span><span id="__span-10-3"><a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a><span class="w">    </span>module<span class="w"> </span>load<span class="w"> </span>netcdf-fortran/4.5.4-oneapi2022.1.0
</span><span id="__span-10-4"><a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a><span class="w">    </span>module<span class="w"> </span>load<span class="w"> </span>udunits/2.2.28
</span><span id="__span-10-5"><a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a><span class="w">    </span>module<span class="w"> </span>load<span class="w"> </span>ncview/2.1.8
</span><span id="__span-10-6"><a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a><span class="w">    </span>module<span class="w"> </span>load<span class="w"> </span>cdo/2.2.0
</span><span id="__span-10-7"><a id="__codelineno-10-7" name="__codelineno-10-7" href="#__codelineno-10-7"></a><span class="w">    </span>module<span class="w"> </span>load<span class="w"> </span>python/3.10.4
</span></code></pre></div>
<p>When installing <code>fesm-utils</code> (see <a href="../dependencies/">Dependencies</a>) use the <code>awi</code> script (which is actually a link to the <code>dkrz</code> script since they work the same way):</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a>./install_awi.sh<span class="w"> </span>ifx
</span></code></pre></div>
<h3 id="running-at-dkrz-on-levante">Running at DKRZ on levante</h3>
<p>Load the following modules in your <code>.bashrc</code> file in your home directory.</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="c1"># Tools</span>
</span><span id="__span-12-2"><a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a>module<span class="w"> </span>load<span class="w"> </span>cdo/2.4.0-gcc-11.2.0
</span><span id="__span-12-3"><a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a>module<span class="w"> </span>load<span class="w"> </span>esmvaltool/2.5.0
</span><span id="__span-12-4"><a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a>module<span class="w"> </span>load<span class="w"> </span>ncview/2.1.8-gcc-11.2.0
</span><span id="__span-12-5"><a id="__codelineno-12-5" name="__codelineno-12-5" href="#__codelineno-12-5"></a>module<span class="w"> </span>load<span class="w"> </span>git/2.43.3-gcc-11.2.0
</span><span id="__span-12-6"><a id="__codelineno-12-6" name="__codelineno-12-6" href="#__codelineno-12-6"></a>module<span class="w"> </span>load<span class="w"> </span>python3/2023.01-gcc-11.2.0
</span><span id="__span-12-7"><a id="__codelineno-12-7" name="__codelineno-12-7" href="#__codelineno-12-7"></a>
</span><span id="__span-12-8"><a id="__codelineno-12-8" name="__codelineno-12-8" href="#__codelineno-12-8"></a><span class="c1"># Compilers and libs</span>
</span><span id="__span-12-9"><a id="__codelineno-12-9" name="__codelineno-12-9" href="#__codelineno-12-9"></a>module<span class="w"> </span>load<span class="w"> </span>intel-oneapi-compilers/2023.2.1-gcc-11.2.0
</span><span id="__span-12-10"><a id="__codelineno-12-10" name="__codelineno-12-10" href="#__codelineno-12-10"></a>module<span class="w"> </span>load<span class="w"> </span>netcdf-c/4.8.1-openmpi-4.1.2-intel-2021.5.0
</span><span id="__span-12-11"><a id="__codelineno-12-11" name="__codelineno-12-11" href="#__codelineno-12-11"></a>module<span class="w"> </span>load<span class="w"> </span>netcdf-fortran/4.5.3-openmpi-4.1.2-intel-2021.5.0
</span></code></pre></div>
<p>When installing <code>fesm-utils</code> (see <a href="../dependencies/">Dependencies</a>) use the <code>dkrz</code> script:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a>./install_dkrz.sh<span class="w"> </span>ifx
</span></code></pre></div>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../dependencies/" class="btn btn-neutral float-left" title="Dependencies"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../runme-notes/" class="btn btn-neutral float-right" title="runme notes">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../dependencies/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../runme-notes/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
